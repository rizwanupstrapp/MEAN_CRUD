<div class="kt-portlet">
    <div class="kt-portlet__head">
        <div class="kt-portlet__head-label">
            <h3 class="kt-portlet__head-title" *ngIf="isAdd">{{'ROLES.ADD' | translate }} </h3>
            <h3 class="kt-portlet__head-title" *ngIf="!isAdd">{{'ROLES.EDIT' | translate }}</h3>
        </div>
        <div class="btn kt-portlet__head-label">
            <a href="javascript:;" routerLink="/roles/list" class="btn btn-brand btn-elevate btn-icon-sm"><i
                    class="la la-left-arrow"></i>{{'BUTTONS.BACK' | translate }}</a>
        </div>
    </div>
    <div class="kt-portlet__body">
        <form class="kt-form kt-form__group" name="addEditRoleForm" [formGroup]="addEditRoleForm">
            <div class="kt-portlet__body">
                <!-- -----------control -->
                <div class="form-group  row">
                    <div class="col-lg-3">
                        <label for="example-text-input" class="col-form-label">
                            {{'ROLES.LABEL.ROLE_NAME' | translate}}*
                        </label>
                    </div>
                    <div class="col-lg-6">
                        <input class="form-control m-input m-login__form-input--last"
                            placeholder="{{'ROLES.PLACEHOLDERS.ROLE_NAME' | translate}}" type="text"
                            formControlName="role_name"
                            [ngClass]="{ 'is-invalid': submitted && addEditRoleForm.controls.role_name.errors }">
                        <div *ngIf="submitted && addEditRoleForm.controls.role_name.errors"
                            class="form-control-feedback" style="color: red">
                            <p *ngIf="submitted && addEditRoleForm.controls.role_name.errors?.required">
                                This field is required.</p>
                            <p *ngIf="addEditRoleForm.controls.role_name.errors?.minlength && !addEditRoleForm.controls.role_name.errors?.pattern"
                                class="lbl-err"> Minimum 2 characters long.</p>
                            <p *ngIf="addEditRoleForm.controls.role_name.errors?.maxlength && !addEditRoleForm.controls.role_name.errors?.pattern"
                                class="lbl-err"> Maximum 64 characters long.</p>
                            <p *ngIf="submitted && addEditRoleForm.controls.role_name.errors?.pattern">
                                Title is invalid. </p>
                        </div>
                    </div>
                </div>
                <div class="form-group  row">
                    <div class="col-xl-3">
                        <h4>{{'ROLES.LABEL.PERMISSIONS' | translate}}</h4>
                    </div>
                </div>
                <table class="table table-striped- table-bordered table-hover table-checkable dataTable no-footer">
                    <thead>
                        <tr>
                            <th class="center">Module Name</th>
                            <th class="center">Read</th>
                            <th class="center">Edit</th>
                            <th class="center">Delete</th>
                            <th class="center">Create</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let permission of allPermissions">
                            <td class="center">  {{permission._id.permission_title}} </td>
                            <ng-container *ngFor="let childPermission of permission.perDetail">
                                <td class="center">  <label class="kt-checkbox kt-checkbox--bold  kt-checkbox--brand">
                                    <input type="checkbox" [id]="childPermission._id" (change)="onChangePermission($event)"
                                        [value]="childPermission._id"> 
                                        <!-- {{childPermission.permission_title}} -->
                                    <span></span>
                                </label></td>
                            </ng-container>
                            <td *ngIf = "permission.perDetail.length == 1"></td>
                            <td *ngIf = "permission.perDetail.length == 1"></td>
                            <td *ngIf = "permission.perDetail.length == 1"></td>
                        </tr>
                    </tbody>
                </table>
                <!-- <div class="form-group  row" *ngFor="let permission of allPermissions">
                    <div class="col-xl-3">
                        {{permission._id.permission_title}}
                    </div>
                    <div class="col-xl-9">
                        <div 
                            style="display:inline-block !important; padding: 10px; ">
                            <label class="kt-checkbox kt-checkbox--bold  kt-checkbox--brand">
                                <input type="checkbox" [id]="childPermission._id" (change)="onChangePermission($event)"
                                    [value]="childPermission._id"> {{childPermission.permission_title}}
                                <span></span>
                            </label>
                        </div>
                    </div>
                </div> -->
                <div class="form-group  row">
                    <div class="col-xl-12">
                            <button type="button" routerLink="/roles/list"
                            class="btn btn-secondary btn-elevate btn-icon-sm mr-3">{{'BUTTONS.CANCEL' | translate }}</button>
                            <button type="submit" (click)="onSubmit()"
                            class="btn btn-brand btn-elevate btn-icon-sm bt-right"> {{'BUTTONS.SUBMIT' | translate }}
                           </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>